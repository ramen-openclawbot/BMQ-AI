{% extends 'base.html' %}

{% block title %}Employee Details - BMQ AI SKU{% endblock %}

{% block content %}
    <div class="row mb-4">
        <div class="col-md-8">
            <h1 class="h2 mb-0">
                <i class="bi bi-person"></i> Nguyen Van A
            </h1>
            <small class="text-muted">EMP-001 • Baker</small>
        </div>
        <div class="col-md-4 text-end">
            <a href="{% url 'labor:employee_edit' 1 %}" class="btn btn-primary me-2">
                <i class="bi bi-pencil"></i> Edit
            </a>
            <a href="{% url 'labor:employee_list' %}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Back
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <!-- Employee Information -->
            <div class="card mb-4">
                <div class="card-header bg-light">
                    <h5 class="card-title mb-0">Employee Information</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <p>
                                <strong>Employee ID:</strong> EMP-001<br>
                                <strong>Name:</strong> Nguyen Van A<br>
                                <strong>Role:</strong> Baker<br>
                                <strong>Hire Date:</strong> 2024-03-15
                            </p>
                        </div>
                        <div class="col-md-6">
                            <p>
                                <strong>Email:</strong> nguyen.a@bakery.com<br>
                                <strong>Phone:</strong> +84-901-234-567<br>
                                <strong>Status:</strong> <span class="badge bg-success">Active</span><br>
                                <strong>Years of Service:</strong> 1 year 11 months
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Wage History -->
            <div class="card">
                <div class="card-header bg-light d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">Wage History</h5>
                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addWageModal">
                        <i class="bi bi-plus-circle"></i> Add Wage Record
                    </button>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>Effective Date</th>
                                <th>Wage Type</th>
                                <th>Base Rate</th>
                                <th>Benefits Multiplier</th>
                                <th>Fully Loaded Rate</th>
                                <th>End Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2025-01-01</td>
                                <td><span class="badge bg-light text-dark">Monthly Salary</span></td>
                                <td><strong>15,000,000 ₫</strong></td>
                                <td>1.30</td>
                                <td><strong>19,500,000 ₫</strong></td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td>2024-03-15</td>
                                <td><span class="badge bg-light text-dark">Monthly Salary</span></td>
                                <td><strong>14,000,000 ₫</strong></td>
                                <td>1.30</td>
                                <td><strong>18,200,000 ₫</strong></td>
                                <td>2024-12-31</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Side Panel -->
        <div class="col-lg-4">
            <!-- Current Wage -->
            <div class="card mb-4">
                <div class="card-header bg-light">
                    <h5 class="card-title mb-0">Current Wage</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Base Rate:</span>
                            <strong>15,000,000 ₫</strong>
                        </div>
                        <small class="text-muted">Monthly Salary</small>
                    </div>

                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Benefits Multiplier:</span>
                            <strong>1.30x</strong>
                        </div>
                    </div>

                    <hr>

                    <div>
                        <div class="d-flex justify-content-between">
                            <strong>Fully Loaded Rate:</strong>
                            <strong class="text-primary" style="font-size: 1.2rem;">19,500,000 ₫</strong>
                        </div>
                        <small class="text-muted">Includes benefits & taxes</small>
                    </div>
                </div>
            </div>

            <!-- Labor Allocation -->
            <div class="card">
                <div class="card-header bg-light">
                    <h5 class="card-title mb-0">Cost Allocation</h5>
                </div>
                <div class="card-body">
                    <p class="small">This employee's labor cost is allocated to products based on:</p>
                    <ul class="small">
                        <li>Time spent on each product</li>
                        <li>Fully loaded hourly rate</li>
                        <li>Overhead allocation method</li>
                    </ul>

                    <div class="alert alert-info small mt-3">
                        <i class="bi bi-info-circle"></i>
                        Used in 8 active products
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Wage Modal -->
    <div class="modal fade" id="addWageModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Wage Record</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="wageType" class="form-label">Wage Type</label>
                            <select class="form-select" id="wageType">
                                <option value="monthly">Monthly Salary</option>
                                <option value="hourly">Hourly Rate</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="baseRate" class="form-label">Base Rate (₫)</label>
                            <input type="number" class="form-control" id="baseRate" placeholder="0.00">
                        </div>

                        <div class="mb-3">
                            <label for="benefitsMultiplier" class="form-label">Benefits Multiplier</label>
                            <input type="number" step="0.01" class="form-control" id="benefitsMultiplier" value="1.30" placeholder="1.30">
                        </div>

                        <div class="mb-3">
                            <label for="effectiveDate" class="form-label">Effective Date</label>
                            <input type="date" class="form-control" id="effectiveDate">
                        </div>

                        <div class="mb-3">
                            <label for="notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="notes" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Add Wage Record</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
